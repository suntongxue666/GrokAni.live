<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GrokAni - Your AI-Powered Grok Ani Chat Companion</title>
    <meta name="description"
        content="GrokAni is an AI-powered anime chat companion that offers a personalized experience through real-time conversation and emotional resonance.">
    <meta name="keywords"
        content="Grok Ani, Grok AI Companion, Ani Companion, AI Companion, Anime Chat, Anime Reactions, artificial intelligence, voice chat, GPT, Claude, Gemini, voice synthesis, conversational AI">
    <meta name="author" content="GrokAni Team">
    <meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
    <meta name="googlebot" content="index, follow">
    <link rel="canonical" href="https://grokani.com/">

    <!-- Additional SEO Meta Tags -->
    <meta name="theme-color" content="#6B46C1">
    <meta name="msapplication-TileColor" content="#6B46C1">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="GrokAni">

    <!-- Preconnect to external domains -->
    <link rel="preconnect" href="https://coin-images.coingecko.com">
    <link rel="dns-prefetch" href="https://platform.openai.com">
    <link rel="dns-prefetch" href="https://console.anthropic.com">
    <link rel="dns-prefetch" href="https://makersuite.google.com">

    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="GrokAni - Your AI-Powered Grok Ani Chat Companion">
    <meta property="og:description"
        content="GrokAni is an AI-powered anime chat companion that offers a personalized experience through real-time conversation and emotional resonance.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://grokani.live/">
    <meta property="og:image" content="https://i.imgur.com/TZe9vge.png">

    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="GrokAni - Your AI-Powered Grok Ani Chat Companion">
    <meta name="twitter:description"
        content="GrokAni is an AI-powered anime chat companion that offers a personalized experience through real-time conversation and emotional resonance.">
    <meta name="twitter:image" content="https://i.imgur.com/TZe9vge.png">

    <!-- Favicon -->
    <link rel="icon" type="image/jpeg"
        href="https://ciwjjfcuhubjydajazkk.supabase.co/storage/v1/object/public/webstie-icon//GrokAni.jpg">
    <link rel="apple-touch-icon"
        href="https://ciwjjfcuhubjydajazkk.supabase.co/storage/v1/object/public/webstie-icon//GrokAni.jpg">

    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">

    <!-- Preload critical resources -->
    <link rel="preload" href="styles.css" as="style">
    <link rel="preload" href="script.js" as="script">

    <link rel="stylesheet" href="styles.css">

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-5ZLXDV99EC"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-5ZLXDV99EC');
    </script>
    
    
</head>

<body>
    <!-- Header -->
    <header class="header">
        <nav class="nav">
            <div class="nav-brand">
                <div class="logo">
                    <img src="https://i.imgur.com/TZe9vge.png" alt="GrokAni Logo"
                        style="width: 100%; height: 100%; border-radius: 50%; object-fit: cover;">
                </div>
                <span class="brand-name">GrokAni</span>
            </div>
            <div class="nav-links">
                <a href="#features" class="nav-link">Features</a>
                <a href="#models" class="nav-link">AI Models</a>
                <a href="#setup" class="nav-link">Setup</a>
                <a href="#about" class="nav-link">About</a>
            </div>
            <div class="nav-mobile">
                <button class="mobile-menu-btn" onclick="toggleMobileMenu()">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
            </div>
        </nav>
    </header>

    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-content">
            <div class="hero-text">
                <h1 class="hero-title">Chat with GrokAni by Role-Playing Experience</h1>
                <p class="hero-subtitle">GrokAni is an AI-powered anime chat companion that offers a personalized
                    experience through real-time conversation and emotional resonance.</p>
                <div class="hero-actions" style="margin-top: 150px;">
                    <a href="#" onclick="loadStartChatAd()" class="cta-button primary">
                        <span class="button-icon">🎤</span>
                        Start Chat
                    </a>
                </div>
            </div>
            <div class="hero-character">
                <div class="character-container" style="position: relative; margin-top: 40px;">
                    <div class="character-image-container" style="width: 360px; height: 640px; border-radius: 30px; overflow: hidden; position: relative; box-shadow: 0 20px 60px rgba(107, 70, 193, 0.4); border: 3px solid rgba(168, 85, 247, 0.5);">
                        <!-- 图片1 -->
                        <img src="https://imgur.com/0DVHMPC.jpg" alt="Ani Wallpaper 1" class="ani-wallpaper active"
                            style="width: 100%; height: 100%; object-fit: cover; position: absolute; top: 0; left: 0; opacity: 1; transition: opacity 1.5s ease-in-out; z-index: 1; border-radius: 0;">
                        <!-- 图片2 -->
                        <img src="https://imgur.com/i4DXike.jpg" alt="Ani Wallpaper 2" class="ani-wallpaper"
                            style="width: 100%; height: 100%; object-fit: cover; position: absolute; top: 0; left: 0; opacity: 0; transition: opacity 1.5s ease-in-out; z-index: 1; border-radius: 0;">
                        <!-- 图片3 -->
                        <img src="https://imgur.com/tlBU7OV.jpg" alt="Ani Wallpaper 3" class="ani-wallpaper"
                            style="width: 100%; height: 100%; object-fit: cover; position: absolute; top: 0; left: 0; opacity: 0; transition: opacity 1.5s ease-in-out; z-index: 1; border-radius: 0;">
                    </div>
                    <a href="wallpapers.html" class="wallpaper-banner" style="position: absolute; bottom: 40px; left: 0; right: 0; background: rgba(107, 70, 193, 0.7); color: white; text-align: center; padding: 12px; font-weight: 600; text-decoration: none; backdrop-filter: blur(5px); z-index: 101; margin: 0 20px; border-radius: 30px;" onclick="loadWallpaperAd(event)">
                        View Ani Wallpapers
                    </a>
                </div>
            </div>
        </div>
    </section>

    <!-- Features Section -->
    <section id="features" class="features">
        <div class="container">
            <h2 class="section-title">Why Choose GrokAni?</h2>
            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-icon">🎯</div>
                    <h3 class="feature-title">Natural Voice Interaction</h3>
                    <p class="feature-description">Experience seamless voice conversations with advanced speech
                        recognition and synthesis technology.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">🧠</div>
                    <h3 class="feature-title">Multiple AI Models</h3>
                    <p class="feature-description">Choose from GPT, Claude, Gemini, and other leading AI models for
                        diverse conversation styles.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">🔒</div>
                    <h3 class="feature-title">Privacy First</h3>
                    <p class="feature-description">Your conversations stay private with local processing and secure API
                        connections.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">⚡</div>
                    <h3 class="feature-title">Lightning Fast</h3>
                    <p class="feature-description">Optimized for speed with minimal latency for real-time voice
                        interactions.</p>
                </div>
            </div>
        </div>
    </section>
    <!-- AI Models Section -->
    <section id="models" class="models">
        <div class="container">
            <h2 class="section-title">Supported AI Models</h2>
            <p class="section-subtitle">Connect with your favorite AI models using your own API keys</p>
            <div class="models-grid">
                <div class="model-card">
                    <div class="model-header">
                        <div class="model-icon">🤖</div>
                        <h3 class="model-name">OpenAI GPT</h3>
                    </div>
                    <p class="model-description">Access GPT-4, GPT-3.5, and other OpenAI models for versatile
                        conversations.</p>
                    <a href="https://platform.openai.com/api-keys" target="_blank" class="api-link">Get OpenAI API Key
                        →</a>
                </div>
                <div class="model-card">
                    <div class="model-header">
                        <div class="model-icon">🎭</div>
                        <h3 class="model-name">Anthropic Claude</h3>
                    </div>
                    <p class="model-description">Experience Claude's thoughtful and nuanced conversational abilities.
                    </p>
                    <a href="https://console.anthropic.com/account/keys" target="_blank" class="api-link">Get Claude API
                        Key →</a>
                </div>
                <div class="model-card">
                    <div class="model-header">
                        <div class="model-icon">💎</div>
                        <h3 class="model-name">Google Gemini</h3>
                    </div>
                    <p class="model-description">Leverage Google's advanced Gemini models for intelligent interactions.
                    </p>
                    <a href="https://makersuite.google.com/app/apikey" target="_blank" class="api-link">Get Gemini API
                        Key →</a>
                </div>
                <div class="model-card">
                    <div class="model-header">
                        <div class="model-icon">🌟</div>
                        <h3 class="model-name">More Models</h3>
                    </div>
                    <p class="model-description">Support for additional models including local LLMs and custom
                        endpoints.</p>
                    <span class="api-link disabled">Coming Soon</span>
                </div>
            </div>
        </div>
    </section>

    <!-- Setup Section -->
    <section id="setup" class="setup">
        <div class="container">
            <h2 class="section-title">Quick Setup Guide</h2>
            <div class="setup-steps">
                <div class="step">
                    <div class="step-number">1</div>
                    <div class="step-content">
                        <h3 class="step-title">Choose Your AI Model</h3>
                        <p class="step-description">Select from OpenAI GPT, Anthropic Claude, or Google Gemini based on
                            your preference.</p>
                    </div>
                </div>
                <div class="step">
                    <div class="step-number">2</div>
                    <div class="step-content">
                        <h3 class="step-title">Get API Key</h3>
                        <p class="step-description">Visit the provider's website and generate your API key. Links are
                            provided in the AI Models section above.</p>
                    </div>
                </div>
                <div class="step">
                    <div class="step-number">3</div>
                    <div class="step-content">
                        <h3 class="step-title">Configure Settings</h3>
                        <p class="step-description">Enter your API key in the settings panel and customize your voice
                            preferences.</p>
                    </div>
                </div>
                <div class="step">
                    <div class="step-number">4</div>
                    <div class="step-content">
                        <h3 class="step-title">Start Chatting</h3>
                        <p class="step-description">Click the "Start Chat" button and begin your AI voice conversation
                            experience!</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- About Section -->
    <section id="about" class="about">
        <div class="container">
            <h2 class="section-title">About GrokAni</h2>
            <div class="about-content">
                <div class="about-text">
                    <p class="about-description">
                        GrokAni is built upon the open-source Airi project, extending its capabilities to create a
                        comprehensive AI voice assistant platform. We believe in the power of open-source collaboration
                        and transparent AI development.
                    </p>
                    <p class="about-description">
                        Our mission is to make advanced AI voice interactions accessible to everyone, while maintaining
                        the highest standards of privacy and user control. With support for multiple AI models and
                        continuous improvements, GrokAni represents the future of conversational AI.
                    </p>
                    <div class="about-features">
                        <div class="about-feature">
                            <span class="feature-check">✓</span>
                            <span>Open Source Foundation</span>
                        </div>
                        <div class="about-feature">
                            <span class="feature-check">✓</span>
                            <span>Privacy-Focused Design</span>
                        </div>
                        <div class="about-feature">
                            <span class="feature-check">✓</span>
                            <span>Multi-Model Support</span>
                        </div>
                        <div class="about-feature">
                            <span class="feature-check">✓</span>
                            <span>Continuous Innovation</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-brand">
                    <div class="footer-logo">
                        <img src="https://i.imgur.com/TZe9vge.png" alt="GrokAni Logo"
                            style="width: 100%; height: 100%; border-radius: 50%; object-fit: cover;">
                    </div>
                    <span class="footer-brand-name">GrokAni</span>
                </div>
            </div>
            <div class="footer-bottom">
                <p class="footer-text">
                    Built with ❤️ based on the open-source <a href="https://github.com/moeru-ai/airi" target="_blank"
                        class="footer-link-external">Airi project</a>.
                    Licensed under the same terms as the original project.
                </p>
                <p class="footer-copyright">© 2024 GrokAni. All rights reserved. | <a href="sitemap.xml"
                        class="footer-link-external" target="_blank">Sitemap</a></p>
            </div>
        </div>
    </footer>

    <script src="script.js"></script>
    <script>
        // 加载壁纸页面广告脚本函数
        function loadWallpaperAd(event) {
            // 阻止默认行为，防止广告脚本加载前跳转
            event.preventDefault(); 
            console.log('GrokAni Action: Bypassing wallpaper ad and redirecting to wallpapers page.');
            // 直接跳转到壁纸页面，不再加载广告
            window.location.href = 'wallpapers.html';
            
            // // 以下是被屏蔽的广告代码，不再执行
            // // 检测是否为移动设备
            // const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
            
            // // 如果是移动设备，直接跳转到壁纸页面
            // if (isMobile) {
            //     console.log('Mobile device detected, skipping ad and redirecting to wallpapers page');
            //     window.location.href = 'wallpapers.html';
            //     event.preventDefault();
            //     return;
            // }
            
            // // PC端显示广告
            // console.log('Desktop device detected, showing ad before redirecting');
            
            // // 创建一个计时器，在一定时间后自动跳转到壁纸页面（如果广告没有正常加载）
            // var adTimeout = setTimeout(function() {
            //     window.location.href = 'wallpapers.html';
            // }, 2000); // 2秒后自动跳转
            
            // // 保存计时器ID，以便在广告加载成功时清除
            // window.wallpaperAdTimeoutId = adTimeout;
            
            // // 加载广告脚本
            // var adScript = document.createElement('script');
            
            // // 使用匿名函数包装广告代码
            // (function(d,z,s){
            //     s.src='https://'+d+'/401/'+z;
            //     try{
            //         (document.body||document.documentElement).appendChild(s);
            //     }catch(e){
            //         console.error('Error loading wallpaper ad:', e);
            //         // 如果广告加载失败，立即跳转到壁纸页面
            //         window.location.href = 'wallpapers.html';
            //     }
            // })('groleegni.net',9588029,adScript);
            
            // // 阻止默认行为，由我们控制跳转
            // event.preventDefault();
        }
        
        // 加载开始聊天广告脚本函数
        function loadStartChatAd() {
            console.log('GrokAni Action: Bypassing start chat ad and initiating chat process.');
            // 直接开始聊天流程，不再加载广告
            startChatProcess();

            // // 以下是被屏蔽的广告代码，不再执行
            // // 创建一个标志，表示广告已经加载
            // window.adLoaded = true;
            
            // // 创建一个计时器，在一定时间后自动继续聊天流程（如果广告没有正常关闭）
            // var adTimeout = setTimeout(function() {
            //     startChatProcess();
            // }, 5000); // 5秒后自动继续
            
            // // 保存计时器ID，以便在广告关闭时清除
            // window.adTimeoutId = adTimeout;
            
            // // 监听广告关闭事件
            // window.addEventListener('message', function(event) {
            //     // 检查消息是否来自广告
            //     if (event.data && event.data.adClosed) {
            //         // 清除自动继续的计时器
            //         clearTimeout(window.adTimeoutId);
            //         // 继续聊天流程
            //         startChatProcess();
            //     }
            // });
            
            // // 加载广告脚本
            // var adScript = document.createElement('script');
            // adScript.onload = function() {
            //     console.log('Ad script loaded');
            // };
            
            // // 使用匿名函数包装广告代码，以便在移动端也能正常工作
            // (function(d,z,s){
            //     s.src='https://'+d+'/401/'+z;
            //     try{
            //         (document.body||document.documentElement).appendChild(s);
                    
            //         // 为移动设备添加特殊处理
            //         if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
            //             // 移动设备上可能需要特殊处理
            //             console.log('Mobile device detected, applying special handling');
                        
            //             // 确保广告容器适应移动屏幕
            //             var adContainers = document.querySelectorAll('.ad-container');
            //             adContainers.forEach(function(container) {
            //                 container.style.width = '100%';
            //                 container.style.maxWidth = '100vw';
            //                 container.style.height = 'auto';
            //             });
            //         }
            //     }catch(e){
            //         console.error('Error loading ad:', e);
            //         // 如果广告加载失败，继续聊天流程
            //         startChatProcess();
            //     }
            // })('gizokraijaw.net',9588047,adScript);
            
            // console.log('Ad loading initiated');
        }
        
        // 开始聊天流程
        function startChatProcess() {
            console.log('Starting chat process...');
            
            // 检查是否已经有保存的API Key
            const savedApiKey = localStorage.getItem('grokani_api_key');
            const savedProvider = localStorage.getItem('grokani_provider');
            
            if (savedApiKey && savedApiKey.trim() !== '' && savedProvider) {
                // 如果API key和提供商都已存在，直接进入聊天页面
                console.log('API key and provider found, redirecting to chat page');
                window.location.href = 'chat.html';
            } else {
                // 如果没有API key或提供商，显示模型选择对话框
                console.log('API key or provider not found, showing model selection dialog');
                showModelSelectionDialog();
            }
        }
        
        // 显示模型选择对话框
        function showModelSelectionDialog() {
            // 创建半透明背景遮罩
            var overlay = document.createElement('div');
            overlay.style.position = 'fixed';
            overlay.style.top = '0';
            overlay.style.left = '0';
            overlay.style.width = '100%';
            overlay.style.height = '100%';
            overlay.style.backgroundColor = 'rgba(0, 0, 0, 0.5)'; // 50%透明度
            overlay.style.zIndex = '999';
            document.body.appendChild(overlay);
            
            // 创建对话框元素
            var dialog = document.createElement('div');
            dialog.className = 'model-selection-dialog';
            dialog.style.position = 'fixed';
            dialog.style.top = '50%';
            dialog.style.left = '50%';
            dialog.style.transform = 'translate(-50%, -50%)';
            dialog.style.backgroundColor = 'var(--card-bg, #1a1a2e)';
            dialog.style.borderRadius = 'var(--border-radius, 12px)';
            dialog.style.padding = '20px';
            dialog.style.boxShadow = 'var(--shadow-lg, 0 10px 25px rgba(0, 0, 0, 0.5))';
            dialog.style.zIndex = '1000';
            dialog.style.maxWidth = '90%';
            dialog.style.width = '400px';
            dialog.style.maxHeight = '80vh';
            dialog.style.overflowY = 'auto';
            
            // 添加标题
            var title = document.createElement('h3');
            title.textContent = 'Select AI Model';
            title.style.marginTop = '0';
            title.style.color = 'var(--text-primary, #ffffff)';
            dialog.appendChild(title);
            
            // 添加模型选项 - 6个不同的提供商
            var models = [
                { name: 'OpenAI', icon: '🤖', provider: 'openai' },
                { name: 'Anthropic', icon: '🎭', provider: 'anthropic' },
                { name: 'Gemini', icon: '💎', provider: 'google' },
                { name: 'OpenRouter', icon: '🌐', provider: 'openrouter' },
                { name: 'Ollama', icon: '🦙', provider: 'ollama' },
                { name: 'DeepSeek', icon: '🔍', provider: 'deepseek' }
            ];
            
            models.forEach(function(model) {
                var option = document.createElement('div');
                option.className = 'model-option';
                option.style.display = 'flex';
                option.style.alignItems = 'center';
                option.style.padding = '12px';
                option.style.margin = '10px 0';
                option.style.borderRadius = 'var(--border-radius-small, 8px)';
                option.style.backgroundColor = 'var(--card-hover-bg, #252547)';
                option.style.cursor = 'pointer';
                option.style.transition = 'var(--transition, all 0.3s ease)';
                
                option.innerHTML = '<span style="font-size: 1.5rem; margin-right: 12px;">' + model.icon + '</span>' +
                                  '<span style="color: var(--text-primary, #ffffff);">' + model.name + '</span>';
                
                // 添加点击事件
                option.onclick = function() {
                    // 关闭对话框
                    document.body.removeChild(dialog);
                    // 开始与选定模型的聊天
                    startChatWithModel(model.name);
                };
                
                // 添加悬停效果
                option.onmouseover = function() {
                    this.style.backgroundColor = 'var(--accent-purple, #6B46C1)';
                };
                option.onmouseout = function() {
                    this.style.backgroundColor = 'var(--card-hover-bg, #252547)';
                };
                
                dialog.appendChild(option);
            });
            
            // 添加取消按钮
            var cancelButton = document.createElement('button');
            cancelButton.textContent = 'Cancel';
            cancelButton.style.backgroundColor = 'transparent';
            cancelButton.style.border = '1px solid var(--card-border, #444464)';
            cancelButton.style.color = 'var(--text-secondary, #a0a0c0)';
            cancelButton.style.padding = '8px 16px';
            cancelButton.style.borderRadius = 'var(--border-radius-small, 8px)';
            cancelButton.style.cursor = 'pointer';
            cancelButton.style.marginTop = '15px';
            cancelButton.style.width = '100%';
            
            cancelButton.onclick = function() {
                document.body.removeChild(dialog);
            };
            
            dialog.appendChild(cancelButton);
            
            // 添加到页面
            document.body.appendChild(dialog);
        }
        
        // 开始与选定模型的聊天
        function startChatWithModel(modelName) {
            console.log('Starting chat with ' + modelName);
            
            // 获取模型提供商 - 直接使用模型名称作为提供商
            let provider = '';
            if (modelName === 'OpenAI') {
                provider = 'openai';
            } else if (modelName === 'Anthropic') {
                provider = 'anthropic';
            } else if (modelName === 'Gemini') {
                provider = 'google';
            } else if (modelName === 'OpenRouter') {
                provider = 'openrouter';
            } else if (modelName === 'Ollama') {
                provider = 'ollama';
            } else if (modelName === 'DeepSeek') {
                provider = 'deepseek';
            }
            
            // 显示API Key输入对话框
            showApiKeyDialog(modelName, provider);
        }
        
        // 显示API Key输入对话框
        function showApiKeyDialog(modelName, provider) {
            // 创建半透明背景遮罩
            var overlay = document.createElement('div');
            overlay.style.position = 'fixed';
            overlay.style.top = '0';
            overlay.style.left = '0';
            overlay.style.width = '100%';
            overlay.style.height = '100%';
            overlay.style.backgroundColor = 'rgba(0, 0, 0, 0.5)'; // 50%透明度
            overlay.style.zIndex = '999';
            document.body.appendChild(overlay);
            
            // 创建对话框元素
            var dialog = document.createElement('div');
            dialog.className = 'api-key-dialog';
            dialog.style.position = 'fixed';
            dialog.style.top = '50%';
            dialog.style.left = '50%';
            dialog.style.transform = 'translate(-50%, -50%)';
            dialog.style.backgroundColor = 'var(--card-bg, #1a1a2e)';
            dialog.style.borderRadius = 'var(--border-radius, 12px)';
            dialog.style.padding = '20px';
            dialog.style.boxShadow = 'var(--shadow-lg, 0 10px 25px rgba(0, 0, 0, 0.5))';
            dialog.style.zIndex = '1000';
            dialog.style.maxWidth = '90%';
            dialog.style.width = '400px';
            
            // 添加标题
            var title = document.createElement('h3');
            title.textContent = 'Enter ' + getProviderName(provider) + ' API Key';
            title.style.marginTop = '0';
            title.style.color = 'var(--text-primary, #ffffff)';
            dialog.appendChild(title);
            
            // 添加描述
            var description = document.createElement('p');
            description.textContent = 'To use ' + modelName + ', you need to provide your API key. Your key is stored locally and never sent to our servers.';
            description.style.color = 'var(--text-secondary, #a0a0c0)';
            description.style.marginBottom = '20px';
            dialog.appendChild(description);
            
            // 添加API Key输入框
            var inputContainer = document.createElement('div');
            inputContainer.style.marginBottom = '20px';
            
            var label = document.createElement('label');
            label.textContent = 'API Key:';
            label.style.display = 'block';
            label.style.marginBottom = '8px';
            label.style.color = 'var(--text-primary, #ffffff)';
            inputContainer.appendChild(label);
            
            var input = document.createElement('input');
            input.type = 'password';
            input.placeholder = 'Enter your ' + getProviderName(provider) + ' API key';
            input.style.width = '100%';
            input.style.padding = '10px';
            input.style.borderRadius = 'var(--border-radius-small, 8px)';
            input.style.border = '1px solid var(--card-border, #444464)';
            input.style.backgroundColor = 'var(--input-bg, #252547)';
            input.style.color = 'var(--text-primary, #ffffff)';
            input.style.marginBottom = '10px';
            inputContainer.appendChild(input);
            
            // 添加显示/隐藏API Key的复选框
            var showKeyContainer = document.createElement('div');
            showKeyContainer.style.display = 'flex';
            showKeyContainer.style.alignItems = 'center';
            
            var checkbox = document.createElement('input');
            checkbox.type = 'checkbox';
            checkbox.id = 'show-api-key';
            checkbox.style.marginRight = '8px';
            showKeyContainer.appendChild(checkbox);
            
            var checkboxLabel = document.createElement('label');
            checkboxLabel.htmlFor = 'show-api-key';
            checkboxLabel.textContent = 'Show API Key';
            checkboxLabel.style.color = 'var(--text-secondary, #a0a0c0)';
            showKeyContainer.appendChild(checkboxLabel);
            
            // 添加显示/隐藏API Key的功能
            checkbox.addEventListener('change', function() {
                input.type = this.checked ? 'text' : 'password';
            });
            
            inputContainer.appendChild(showKeyContainer);
            dialog.appendChild(inputContainer);
            
            // 添加"Remember this key"复选框
            var rememberContainer = document.createElement('div');
            rememberContainer.style.display = 'flex';
            rememberContainer.style.alignItems = 'center';
            rememberContainer.style.marginBottom = '20px';
            
            var rememberCheckbox = document.createElement('input');
            rememberCheckbox.type = 'checkbox';
            rememberCheckbox.id = 'remember-api-key';
            rememberCheckbox.checked = true;
            rememberCheckbox.style.marginRight = '8px';
            rememberContainer.appendChild(rememberCheckbox);
            
            var rememberLabel = document.createElement('label');
            rememberLabel.htmlFor = 'remember-api-key';
            rememberLabel.textContent = 'Remember this key';
            rememberLabel.style.color = 'var(--text-secondary, #a0a0c0)';
            rememberContainer.appendChild(rememberLabel);
            
            dialog.appendChild(rememberContainer);
            
            // 添加按钮容器
            var buttonContainer = document.createElement('div');
            buttonContainer.style.display = 'flex';
            buttonContainer.style.justifyContent = 'space-between';
            buttonContainer.style.gap = '10px';
            
            // 添加取消按钮
            var cancelButton = document.createElement('button');
            cancelButton.textContent = 'Cancel';
            cancelButton.style.flex = '1';
            cancelButton.style.backgroundColor = 'transparent';
            cancelButton.style.border = '1px solid var(--card-border, #444464)';
            cancelButton.style.color = 'var(--text-secondary, #a0a0c0)';
            cancelButton.style.padding = '10px';
            cancelButton.style.borderRadius = 'var(--border-radius-small, 8px)';
            cancelButton.style.cursor = 'pointer';
            
            cancelButton.onclick = function() {
                document.body.removeChild(overlay);
                document.body.removeChild(dialog);
            };
            
            buttonContainer.appendChild(cancelButton);
            
            // 添加继续按钮
            var continueButton = document.createElement('button');
            continueButton.textContent = 'Continue';
            continueButton.style.flex = '1';
            continueButton.style.backgroundColor = 'var(--primary-purple, #6B46C1)';
            continueButton.style.border = 'none';
            continueButton.style.color = 'white';
            continueButton.style.padding = '10px';
            continueButton.style.borderRadius = 'var(--border-radius-small, 8px)';
            continueButton.style.cursor = 'pointer';
            
            continueButton.onclick = function() {
                var apiKey = input.value.trim();
                if (apiKey) {
                    // 保存API Key到localStorage，使用通用键名和特定于提供商的键名
                    localStorage.setItem('grokani_provider', provider);
                    localStorage.setItem('grokani_api_key', apiKey);
                    
                    // 同时保存特定于提供商的API Key
                    localStorage.setItem(provider + '_api_key', apiKey);
                    
                    // 显示保存成功的提示
                    const saveMessage = document.createElement('div');
                    saveMessage.textContent = 'API Key saved successfully!';
                    saveMessage.style.position = 'fixed';
                    saveMessage.style.top = '20px';
                    saveMessage.style.left = '50%';
                    saveMessage.style.transform = 'translateX(-50%)';
                    saveMessage.style.backgroundColor = '#6B46C1';
                    saveMessage.style.color = 'white';
                    saveMessage.style.padding = '10px 20px';
                    saveMessage.style.borderRadius = '8px';
                    saveMessage.style.zIndex = '1000';
                    document.body.appendChild(saveMessage);
                    
                    // 关闭对话框
                    document.body.removeChild(overlay);
                    document.body.removeChild(dialog);
                    
                    // 1秒后移除提示并跳转
                    setTimeout(() => {
                        document.body.removeChild(saveMessage);
                        // 跳转到聊天页面
                        window.location.href = 'chat.html';
                    }, 1000);
                } else {
                    // 显示错误消息
                    input.style.border = '1px solid red';
                    var errorMsg = document.createElement('p');
                    errorMsg.textContent = 'Please enter a valid API key';
                    errorMsg.style.color = 'red';
                    errorMsg.style.margin = '5px 0';
                    
                    // 如果已经有错误消息，则不再添加
                    if (!document.querySelector('.api-key-error')) {
                        errorMsg.className = 'api-key-error';
                        inputContainer.insertBefore(errorMsg, showKeyContainer);
                    }
                }
            };
            
            buttonContainer.appendChild(continueButton);
            dialog.appendChild(buttonContainer);
            
            // 添加"Get API Key"链接
            var getKeyLink = document.createElement('a');
            getKeyLink.textContent = 'Don\'t have an API key? Get one here';
            getKeyLink.href = getApiKeyUrl(provider);
            getKeyLink.target = '_blank';
            getKeyLink.style.display = 'block';
            getKeyLink.style.textAlign = 'center';
            getKeyLink.style.marginTop = '15px';
            getKeyLink.style.color = 'var(--accent-purple, #8B5CF6)';
            getKeyLink.style.textDecoration = 'none';
            dialog.appendChild(getKeyLink);
            
            // 添加到页面
            document.body.appendChild(dialog);
            
            // 自动填充已保存的API Key
            var savedApiKey = localStorage.getItem(provider + '_api_key');
            if (savedApiKey) {
                input.value = savedApiKey;
            }
            
            // 聚焦到输入框
            input.focus();
        }
        
        // 获取提供商名称
        function getProviderName(provider) {
            switch (provider) {
                case 'openai':
                    return 'OpenAI';
                case 'anthropic':
                    return 'Anthropic';
                case 'google':
                    return 'Google';
                default:
                    return 'API';
            }
        }
        
        // 获取API Key URL
        function getApiKeyUrl(provider) {
            switch (provider) {
                case 'openai':
                    return 'https://platform.openai.com/api-keys';
                case 'anthropic':
                    return 'https://console.anthropic.com/account/keys';
                case 'google':
                    return 'https://makersuite.google.com/app/apikey';
                default:
                    return '#';
            }
        }
        
        // 确保图片正确加载
        document.addEventListener('DOMContentLoaded', function () {
            // 获取所有图片元素
            const images = document.querySelectorAll('img');

            // 为每个图片添加加载事件处理
            images.forEach(img => {
                // 添加随机参数防止缓存
                if (img.src.includes('imgur.com')) {
                    img.src = img.src + '?v=' + new Date().getTime();
                }

                // 添加错误处理
                img.onerror = function () {
                    console.error('Image failed to load:', this.src);
                    // 重试加载
                    setTimeout(() => {
                        this.src = this.src.split('?')[0] + '?retry=' + new Date().getTime();
                    }, 500);
                };

                // 添加加载完成处理
                img.onload = function () {
                    console.log('Image loaded successfully:', this.src);
                };
            });
            
            // 初始化壁纸轮播
            initWallpaperRotation();
        });

        // 当从其他页面返回时，确保重新加载图片
        window.addEventListener('pageshow', function (event) {
            // 如果是从缓存加载的页面，重新加载图片
            if (event.persisted) {
                window.location.reload();
            }
        });
        
        // 壁纸轮播功能
        function initWallpaperRotation() {
            const wallpapers = document.querySelectorAll('.ani-wallpaper');
            console.log('GrokAni Debug: initWallpaperRotation called. Total wallpapers found:', wallpapers.length); // 调试日志
            if (wallpapers.length === 0) {
                console.warn('GrokAni Debug: No wallpapers found to rotate.'); // 调试日志
                return;
            }
            
            // 确保第一张壁纸默认显示，我们将初始索引设置为0
            let currentIndex = 0; // 修改：从第一张壁纸开始 (索引为0)
            console.log('GrokAni Debug: Initial wallpaper index set to:', currentIndex); // 调试日志
            showWallpaper(currentIndex);
            
            // 每30秒切换一次壁纸
            setInterval(() => {
                // 顺序切换到下一张壁纸。如果当前是最后一张，则回到第一张（通过模运算实现）
                currentIndex = (currentIndex + 1) % wallpapers.length; // 修改：实现顺序轮播
                console.log('GrokAni Debug: Switching to next wallpaper. New index:', currentIndex); // 调试日志
                showWallpaper(currentIndex);
            }, 30000); // 30秒
        }
        
        // 显示指定索引的壁纸
        function showWallpaper(index) {
            const wallpapers = document.querySelectorAll('.ani-wallpaper');
            // 记录正在尝试显示的壁纸URL，以便我们知道是哪一张
            console.log('GrokAni Debug: showWallpaper called for index:', index, 'URL:', wallpapers[index] ? wallpapers[index].src : 'N/A'); // 调试日志
            
            // 隐藏所有壁纸
            wallpapers.forEach(wallpaper => {
                wallpaper.classList.remove('active');
                wallpaper.style.opacity = '0';
            });
            
            // 显示选中的壁纸
            if (wallpapers[index]) { // 确保索引有效
                wallpapers[index].classList.add('active');
                wallpapers[index].style.opacity = '1';
                console.log('GrokAni Debug: Successfully applied styles to wallpaper at index:', index); // 调试日志
            } else {
                console.error('GrokAni Debug: Error: Wallpaper at index', index, 'does not exist.'); // 调试日志
            }
        }
    </script>
</body>

</html>